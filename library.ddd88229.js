!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var u=new Error("Cannot find module '"+e+"'");throw u.code="MODULE_NOT_FOUND",u}).register=function(e,t){r[e]=t},e.parcelRequired7c6=n),n("bUBQC"),n("deWps");var i="movie-watched",u="movie-queue",a={watchedArray:d(i),queueArray:d(u),watchedExists:function(e){return-1!=this.indexById(this.watchedArray,e)},queueExists:function(e){return-1!=this.indexById(this.queueArray,e)},indexById:function(e,t){return e.findIndex((function(e){return e.id==t}))},addWatched:function(e){return!this.watchedExists(e.id)&&(this.watchedArray.push(e),o(i,this.watchedArray),!0)},removeWatched:function(e){if(this.watchedExists(e)){var t=this.indexById(this.watchedArray,e);this.watchedArray.splice(t,1),o(i,this.watchedArray)}},addQueue:function(e){return!this.queueExists(e.id)&&(this.queueArray.push(e),o(u,this.queueArray),!0)},removeQueue:function(e){if(this.queueExists(e)){var t=this.indexById(this.queueArray,e);this.queueArray.splice(t,1),o(u,this.queueArray)}}};function d(e){var t=localStorage.getItem(e),r=[];return null!==t&&(r=JSON.parse(t)),r}function o(e,t){localStorage.setItem(e,JSON.stringify(t))}var c=n("kIlwO"),s="click",h=document.querySelector(".gallery-js"),l=document.querySelector("#lib-watched-tab"),f=document.querySelector("#lib-queue-tab"),y="watched",v=0,w=document.querySelector(".movie-btn-container"),q=w.children[0],x=w.children[1];function m(){q.textContent=a.watchedExists(v)?"remove from watched":"add to watched",x.textContent=a.queueExists(v)?"remove from queue":"add to queue"}function p(e){var t=[];switch(y=e){case"watched":t=a.watchedArray;break;case"queue":t=a.queueArray}var r=t.map((function(e){return(0,c.markupCardForMovie)(e)}));h.innerHTML=r.join("")}l.addEventListener(s,(function(){return p("watched")})),f.addEventListener(s,(function(){return p("queue")})),h.addEventListener(s,(function(e){var t=e.path.findIndex((function(e){return null!=e.dataset.index}));-1!=t&&(v=e.path[t].dataset.index,m())})),q.addEventListener(s,(function(e){a.watchedExists(v)?a.removeWatched(v):console.log("TODO: add movie"),p(y),m()})),x.addEventListener(s,(function(e){a.queueExists(v)?a.removeQueue(v):console.log("TODO: add queue"),p(y),m()})),p(y)}();
//# sourceMappingURL=library.ddd88229.js.map
